library(tidyverse)
library(here)
library(janitor)
library(readxl)
library(lubridate)
library(plotly)
library(htmltools)
library(DT)
library(tidycensus)
library(censusapi)
Sys.setenv(CENSUS_KEY="f0c4bf511063de6900e4007c6f8fef68641af8d7")
information_flags <- read_csv(here("data", "muckrock_informational_ee.csv")) %>%
clean_names() %>%
mutate(state_county_fips = str_remove(str_sub(airs_monitor_id, 1, 6), pattern= "-")) %>%
left_join(fips, by = "state_county_fips") %>%
mutate(date = date(sample_date_time))
library(tidyverse)
library(here)
library(janitor)
library(readxl)
library(lubridate)
library(plotly)
library(htmltools)
library(DT)
library(tidycensus)
library(censusapi)
Sys.setenv(CENSUS_KEY="f0c4bf511063de6900e4007c6f8fef68641af8d7")
information_flags <- read_csv(here("data", "muckrock_informational_ee.csv")) %>%
clean_names() %>%
mutate(state_county_fips = str_remove(str_sub(airs_monitor_id, 1, 6), pattern= "-")) %>%
left_join(fips, by = "state_county_fips") %>%
mutate(date = date(sample_date_time))
fips <- as.data.frame(fips_codes) %>%
mutate(state_county_fips = paste0(state_code, county_code)) %>%
select(state_name, county, state_county_fips) %>%
rename(state = state_name)
information_flags <- read_csv(here("data", "muckrock_informational_ee.csv")) %>%
clean_names() %>%
mutate(state_county_fips = str_remove(str_sub(airs_monitor_id, 1, 6), pattern= "-")) %>%
left_join(fips, by = "state_county_fips") %>%
mutate(date = date(sample_date_time))
View(information_flags)
midwest_states <- information_flags
View(midwest_states)
midwest_states <- information_flags %>%
distinct(state)
View(midwest_states)
# Of 30 states, these are midwest: Indiana, Iowa, Kansas, Nebraska, Ohio,  Wisconsin + Pennsylvania and Kentucky, which are debateable
# Angle could be - states that have never filed exceptional events, filing now?
midwest_states <- information_flags %>%
distinct(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin"))
View(midwest_states)
# Of 30 states, these are midwest: Indiana, Iowa, Kansas, Nebraska, Ohio,  Wisconsin + Pennsylvania and Kentucky, which are debateable ?
# Angle could be - states that have never filed exceptional events, filing now?
midwest_states <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin"))
# Of 30 states, these are midwest: Indiana, Iowa, Kansas, Nebraska, Ohio,  Wisconsin + Pennsylvania and Kentucky, which are debateable ?
# Angle could be - states that have never filed exceptional events, filing now?
midwest_states <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.")
# Of 30 states, these are midwest: Indiana, Iowa, Kansas, Nebraska, Ohio,  Wisconsin + Pennsylvania and Kentucky, which are debateable ?
# Angle could be - states that have never filed exceptional events, filing now?
midwest_states <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(state)
View(midwest_states)
# Of 30 states, these are midwest: Indiana, Iowa, Kansas, Nebraska, Ohio,  Wisconsin + Pennsylvania and Kentucky, which are debateable ?
# Angle could be - states that have never filed exceptional events, filing now?
# Indiana's flags were for construction, not the fire
midwest_states <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(state, county)
midwest_states_and_counties <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(state, county, pollutant_name)
View(midwest_states_and_counties)
View(information_flags)
# Unique days by state (at least one monitor was flagged in any county)
iowa_days <- information_flags %>%
filter(state = "Iowa") %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(date)
# Unique days by state (at least one monitor was flagged in any county)
iowa_days <- information_flags %>%
filter(state == "Iowa") %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(date)
View(iowa_days)
# Unique days by state (at least one monitor was flagged in any county)
iowa_days <- information_flags %>%
filter(state == "Iowa") %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(date)
kansas_days <- information_flags %>%
filter(state == "Kansas") %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(date)
nebraska_days <- information_flags %>%
filter(state == "Nebraska") %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(date)
ohio_days <- information_flags %>%
filter(state == "Ohio") %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(date)
wisconsin_days <- information_flags %>%
filter(state == "Wisconsin") %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(date)
unique_days_by_state <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
group_by(state) %>%
summarize(unique_days = distinct(date))
unique_days_by_state <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.")
group_by(state) %>%
summarize(unique_days = distinct(date))
unique_days_by_state <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.")
#group_by(state) %>%
#summarize(unique_days = distinct(date))
unique_days_by_state <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
group_by(state) %>%
summarize(unique_days = distinct(date))
View(unique_days_by_state)
unique_days_by_state <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
group_by(state) %>%
summarize(unique_days = n_distinct(date))
View(wisconsin_days)
View(nebraska_days)
unique_county_days_by_state <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
group_by(state, county) %>%
summarize(days = n_distinct(date))
unique_county_days_by_state %>%
group_by(state) %>%
summarize(county_days = sum(days))
unique_county_days_by_state <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
group_by(state, county) %>%
summarize(days = n_distinct(date))
unique_county_days_by_state <- unique_county_days_by_state  %>%
group_by(state) %>%
summarize(county_days = sum(days))
View(unique_county_days_by_state)
unique_counties_by_state <-  information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
group_by(state) %>%
summarize(counties_flagged = n_distinct(county))
View(unique_counties_by_state)
# Ozone
highest_ozone_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "Ozone")
View(highest_ozone_comparison)
# Ozone
highest_ozone_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "Ozone") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = mean(sample_value))
View(highest_ozone_comparison)
# PM10
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM2.5 - Local Conditions") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = mean(sample_value))
View(highest_pm25_comparison)
# PM10
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM10 Total 0-10um STP") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = mean(sample_value))
# PM10
highest_pm10_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM10 Total 0-10um STP") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = mean(sample_value))
View(highest_pm10_comparison)
View(unique_days_by_state)
View(unique_counties_by_state)
View(midwest_states_and_counties)
