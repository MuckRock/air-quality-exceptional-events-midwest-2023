library(tidyverse)
library(here)
library(janitor)
library(readxl)
library(lubridate)
library(plotly)
library(htmltools)
library(DT)
library(tidycensus)
library(censusapi)
Sys.setenv(CENSUS_KEY="f0c4bf511063de6900e4007c6f8fef68641af8d7")
# Load data from ozone monitors in and around Chicago to compare
chicago <- read_csv(here("data", "raw", "com_ed_chicago_ozone_max_2023.csv"))
elgin <- read_csv(here("data", "raw", "kane_ozone_max_2023.csv"))
zion <- read_csv(here("data", "raw", "zion_ozone_max_2023.csv"))
northbrook <- read_csv(here("data", "raw", "northbrook_ozone_max_2023.csv"))
kenosha <- read_csv(here("data", "raw", "kenosha_ozone_max_2023.csv"))
sheboygan <- read_csv(here("data", "raw", "sheboygan_ozone_max_2023.csv"))
all_cities <- rbind(chicago, elgin, zion, northbrook, kenosha, sheyboygan)
all_cities <- rbind(chicago, elgin, zion, northbrook, kenosha, sheboygan)
View(all_cities)
june_25 <- all_cities %>%
filter(Date == "06/25/2023")
View(june_25)
july_25 <- all_cities %>%
filter(Date == "07/25/2023")
View(july_25)
# Load data from ozone monitors in and around Chicago to compare
chicago <- read_csv(here("data", "raw", "com_ed_chicago_ozone_max_2023.csv")) %>%
mutate(name = "chicago")
elgin <- read_csv(here("data", "raw", "kane_ozone_max_2023.csv")) %>%
mutate(name = "elgin")
zion <- read_csv(here("data", "raw", "zion_ozone_max_2023.csv")) %>%
mutate(name = "zion")
northbrook <- read_csv(here("data", "raw", "northbrook_ozone_max_2023.csv"))  %>%
mutate(name = "northbrook")
kenosha <- read_csv(here("data", "raw", "kenosha_ozone_max_2023.csv")) %>%
mutate(name = "kenosha")
sheboygan <- read_csv(here("data", "raw", "sheboygan_ozone_max_2023.csv"))%>%
mutate(name = "sheboygan")
all_cities <- rbind(chicago, elgin, zion, northbrook, kenosha, sheboygan)
july_25 <- all_cities %>%
filter(Date == "07/25/2023")
View(july_25)
str(july_25)
july_25 <- all_cities %>%
filter(Date == "07/25/2023") %>%
select(Date, Source, name, `Site Name`, `Daily Max 8-hour Ozone Concentration`, DAILY_AQI_VALUE) %>%
rename(Location = name)
july_25 <- all_cities %>%
filter(Date == "07/25/2023") %>%
select(Date, Source, name, `Site Name`, `Daily Max 8-hour Ozone Concentration`, DAILY_AQI_VALUE) %>%
rename(Location = name) %>%
mutate(percent_above_standard = (`Daily Max 8-hour Ozone Concentration` - .07)/((`Daily Max 8-hour Ozone Concentration` + .07)/2))
july_25 <- all_cities %>%
filter(Date == "07/25/2023") %>%
select(Date, Source, name, `Site Name`, `Daily Max 8-hour Ozone Concentration`, DAILY_AQI_VALUE) %>%
rename(Location = name) %>%
mutate(percent_above_standard = (`Daily Max 8-hour Ozone Concentration` - .07)/((`Daily Max 8-hour Ozone Concentration` + .07)/2)) %>%
clean_names()
july_25 <- all_cities %>%
filter(Date == "07/25/2023") %>%
select(Date, Source, name, `Site Name`, `Daily Max 8-hour Ozone Concentration`, DAILY_AQI_VALUE) %>%
rename(Location = name) %>%
mutate(percent_above_standard = signif((`Daily Max 8-hour Ozone Concentration` - .07)/((`Daily Max 8-hour Ozone Concentration` + .07)/2)), digits = 2)%>%
clean_names()
View(july_25)
july_25 <- all_cities %>%
filter(Date == "07/25/2023") %>%
select(Date, Source, name, `Site Name`, `Daily Max 8-hour Ozone Concentration`, DAILY_AQI_VALUE) %>%
rename(Location = name) %>%
mutate(percent_above_standard = round((`Daily Max 8-hour Ozone Concentration` - .07)/((`Daily Max 8-hour Ozone Concentration` + .07)/2)), digits = 2)%>%
clean_names()
july_25 <- all_cities %>%
filter(Date == "07/25/2023") %>%
select(Date, Source, name, `Site Name`, `Daily Max 8-hour Ozone Concentration`, DAILY_AQI_VALUE) %>%
rename(Location = name) %>%
mutate(percent_above_standard = signif((`Daily Max 8-hour Ozone Concentration` - .07)/((`Daily Max 8-hour Ozone Concentration` + .07)/2), digits = 2))%>%
clean_names()
View(all_cities)
View(july_25)
View(all_cities)
library(tidyverse)
library(here)
library(janitor)
library(readxl)
library(lubridate)
library(plotly)
library(htmltools)
library(DT)
library(tidycensus)
library(censusapi)
Sys.setenv(CENSUS_KEY="f0c4bf511063de6900e4007c6f8fef68641af8d7")
fips <- as.data.frame(fips_codes) %>%
mutate(state_county_fips = paste0(state_code, county_code)) %>%
select(state_name, county, state_county_fips) %>%
rename(state = state_name)
information_flags <- read_csv(here("data", "muckrock_informational_ee.csv")) %>%
clean_names() %>%
mutate(state_county_fips = str_remove(str_sub(airs_monitor_id, 1, 6), pattern= "-")) %>%
left_join(fips, by = "state_county_fips") %>%
mutate(date = date(sample_date_time))
# PM25
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM2.5 - Local Conditions") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = mean(sample_value))
View(highest_pm25_comparison)
# PM25
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM2.5 - Local Conditions") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = signif(mean(sample_value)), digits = 2)
# PM25
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM2.5 - Local Conditions") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = signif(mean(sample_value), digits = 2))
# PM25
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM2.5 - Local Conditions") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = signif(mean(sample_value), digits = 3))
# PM25
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM2.5 - Local Conditions") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = signif(mean(sample_value), digits = 4))
# PM25
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM2.5 - Local Conditions") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = round(mean(sample_value), digits = 2))
# PM25
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM2.5 - Local Conditions") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = round(mean(sample_value), digits = 0))
View(highest_pm25_comparison)
# PM25
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM2.5 - Local Conditions") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(mean = round(mean(sample_value), digits = 0)) %>%
filter(date == "2023-06-28")
View(highest_pm25_comparison)
View(information_flags)
library(tidyverse)
library(here)
library(janitor)
library(readxl)
library(lubridate)
library(plotly)
library(htmltools)
library(DT)
library(tidycensus)
library(censusapi)
Sys.setenv(CENSUS_KEY="f0c4bf511063de6900e4007c6f8fef68641af8d7")
corrected_purpleair_data <- read_csv(here("data", "processed", "purple_air_little_village_woodstock.csv"))
View(corrected_purpleair_data)
fips <- as.data.frame(fips_codes) %>%
mutate(state_county_fips = paste0(state_code, county_code)) %>%
select(state_name, county, state_county_fips) %>%
rename(state = state_name)
information_flags <- read_csv(here("data", "raw", "epa_informational_flags", "epa_national_informational_ee.csv")) %>%
clean_names() %>%
mutate(state_county_fips = str_remove(str_sub(airs_monitor_id, 1, 6), pattern= "-")) %>%
left_join(fips, by = "state_county_fips") %>%
mutate(date = date(sample_date_time))
# PM25
highest_pm25_comparison <- information_flags %>%
filter(state %in% c("Indiana", "Iowa", "Kansas", "Nebraska", "Ohio",  "Wisconsin")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
filter(pollutant_name == "PM2.5 - Local Conditions") %>%
group_by(airs_monitor_id, state, county, date) %>%
summarize(daily_avg = round(mean(sample_value), digits = 0), readings = n()) %>%
filter(date == "2023-06-28")
# Cleveland: 39-035-0038-88101-3 /  St Theodosius
# Madison: 55-025-0047-88101-3 / MADISON - UNIVERSITY AVE WELL #6
# Clinton: 19-045-0019-88101-3 / CLINTON, CHANCY PARK
#| output: true
#| column: page
datatable(highest_pm25_comparison, filter = 'top', class = 'cell-border stripe order-column', extensions = 'Buttons',
options = list(
paging = TRUE,
searching = TRUE,
fixedColumns = TRUE,
autoWidth = TRUE,
ordering = TRUE,
dom = 'tB',
buttons = c('copy', 'csv', 'excel')
))
View(highest_pm25_comparison)
wisconsin_days <- information_flags %>%
filter(state == "Wisconsin") %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(county)
View(wisconsin_days)
wisconsin_days <- information_flags %>%
filter(state == "Wisconsin") %>%
#filter(event_type_description == "Fire - Canadian.") %>%
distinct(county)
View(wisconsin_days)
wisconsin_days <- information_flags %>%
filter(state == "Wisconsin") %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(county)
wisconsin_days <- information_flags %>%
filter(state == "Wisconsin") %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(date)
View(wisconsin_days)
michigan <- read_excel(here("data", "raw", "epa_informational_flags, michigan_foia_2023_AQS_Flagging_Information.xlsx"))
michigan <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"))
View(michigan)
michigan_may <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 2)
View(michigan_may)
michigan_may <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 2) %>%
slice(-1)
View(michigan_may)
michigan_may <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"),sheet = 2, skip = 1)
View(michigan_may)
michigan_may <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 2, skip = 1) %>% clean_names()
michigan_june <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 3, skip = 1) %>% clean_names()
michigan_july <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 4, skip = 1) %>% clean_names()
View(michigan_may)
View(michigan_june)
View(michigan_july)
View(michigan_may)
View(michigan_june)
View(michigan_july)
michigan_may <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 2, skip = 1) %>% clean_names() %>%
select(date_s_of_events, county, naaqs)
michigan_june <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 3, skip = 1) %>% clean_names() %>%
select(date_s_of_events, county, naaqs)
michigan_july <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 4, skip = 1) %>% clean_names() %>%
select(date_s_of_events, county, naaqs)
michigan_may <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 2, skip = 1) %>% clean_names() %>%
select(date_s_of_events, county, naaqs)
michigan_june <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 3, skip = 1) %>% clean_names() %>%
select(date_s_of_events, county, naaqs)
michigan_july <- read_excel(here("data", "raw", "epa_informational_flags", "michigan_foia_2023_AQS_Flagging_Information.xlsx"), sheet = 4, skip = 1) %>% clean_names() %>%
select(date_s_of_events, county, naaqs)
michigan_flags <- rbind(michigan_may, michigan_june, michigan_july)
View(michigan_flags)
michigan_counties <- michigan_flags %>%
filter(naaqs = "Ozone") %>%
distinct(county)
michigan_counties <- michigan_flags %>%
filter(naaqs == "Ozone") %>%
distinct(county)
michigan_ozone_counties <- michigan_flags %>%
filter(naaqs == "Ozone") %>%
distinct(county)
View(michigan_ozone_counties)
michigan_ozone_counties <- michigan_flags %>%
michigan_ozone_counties <- michigan_flags %>%
michigan_ozone_counties <- michigan_flags %>%
michigan_ozone_counties <- michigan_flags %>%
michigan_ozone_counties <- michigan_flags %>%
filter(!is.na(county)
michigan_ozone_counties <- michigan_flags %>%
michigan_ozone_counties <- michigan_flags %>%
filter(naaqs == "Ozone") %>%
filter(!is.na(county)) %>%
distinct(county)
View(michigan_july)
michigan_flags <- rbind(michigan_may, michigan_june, michigan_july)
michigan_particulates_july_25 <- michigan_flags %>%
rename(date = date_s_of_events) %>%
filter(date == "07/25/2023")
michigan_particulates_july_25 <- michigan_flags %>%
rename(date = date_s_of_events) %>%
filter(date == "07/25/23")
View(michigan_particulates_july_25)
michigan_particulates_july_25 <- michigan_flags %>%
rename(date = date_s_of_events) %>%
filter(date == "07/25/23")
View(michigan_particulates_july_25)
michigan_particulates_july_25 <- michigan_flags %>%
rename(date = date_s_of_events)
View(michigan_particulates_july_25)
michigan_particulates_july_25 <- michigan_flags %>%
rename(date = date_s_of_events)
michigan_particulates_july_25 <- michigan_flags %>%
rename(date = date_s_of_events) %>%
filter(date == "7/25/23")
View(michigan_particulates_july_25)
michigan_particulates_july_25 <- michigan_flags %>%
rename(date = date_s_of_events) %>%
filter(date == "7/25/23") %>%
distinct(date, county)
michigan_particulates_july_25 <- michigan_flags %>%
rename(date = date_s_of_events) %>%
filter(date == "7/25/23") %>%
distinct(date, county, naaqs)
michigan_particulates_july_25 <- michigan_flags %>%
rename(date = date_s_of_events) %>%
filter(date == "7/25/23") %>%
filter(!naaqs == "Ozone") %>%
distinct(date, county, naaqs)
region_7_states <- information_flags %>%
filter(state %in% c("Iowa", "Kansas", "Nebraska")) %>%
filter(event_type_description == "Fire - Canadian.")
View(region_7_states)
region_7_states_monitors <- information_flags %>%
filter(state %in% c("Iowa", "Kansas", "Nebraska")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(airs_monitor_id, state, county, agency_desc, event_type_description)
region_7_states_monitors_flagged <- information_flags %>%
filter(state %in% c("Iowa", "Kansas", "Nebraska")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(airs_monitor_id, state, county, agency_desc, event_type_description)
region_7_monitors_flagged <- information_flags %>%
filter(state %in% c("Iowa", "Kansas", "Nebraska")) %>%
filter(event_type_description == "Fire - Canadian.") %>%
distinct(airs_monitor_id, state, county, agency_desc, event_type_description)
View(region_7_monitors_flagged)
ozone_spikes <- read_csv(here("data", "processed", "all_cities_daily_max_ozone_2023.csv"))
View(ozone_spikes)
ozone_spikes <- read_csv(here("data", "processed", "all_cities_daily_max_ozone_2023.csv")) %>%
select(-1)
getwd()
setwd("C:/Users/newsd/home/code/tribune-folo-exceptional-events")
getwd()
![Area burned screenshot](manual/screenshot_canadian_areas_burned_1993_2023.png)
getwd()
